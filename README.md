# AFormat 

作者：<br>
余悦（架构设计，大多数代码的实现）<br>
刘智睿（为部分技术难点提供解决思路）<br>

摘要：<br>
1.AFormat类是对标准库函数sprintf的复刻以及扩充。<br>
2.AFormat类内置多个转换函数，能够实现整数到字符串、浮点数到字符串等各种转换。<br>
3.内置变参函数printf，与标准库中的同名函数不同，该函数往目标缓冲区输出数据，而不是向标准输出流。<br>

全部功能如下：<br>
1.字符串到各种基本数据类型的转换。<br>
2.各种基本类型到字符串的转换。<br>
3.基本数据类型到二进制、八进制、十六进制序列的转换（转换结果本质为字符串）。<br>
4.二进制、八进制、十六进制序列到基本数据类型的转换。<br>
5.检测系统是否为x64模式、是否为小端模式。<br>
6.将格式化的数据写入某个缓冲区。<br>

其中，printf支持以下格式控制字符（与标准库基本一致）：<br>
%b:输出二进制序列，对标准的扩充<br>
%c:输出字符<br>
%d:输出整数，注意，由于%i过于久远，因此不再被支持，统一使用%d代替<br>
%e:输出浮点数，结果表示为科学计数法<br>
%f:输出浮点数<br>
%g:输出浮点数，根据精度自动选择是否使用科学计数法<br>
%o:输出八进制序列<br>
%p:输出地址序列<br>
%s:输出字符串<br>
%x:输出十六进制序列（小写）<br>
%X:输出十六进制序列（大写）<br>

printf函数使用的格式控制字符如下：<br>
%[flag][digit][prec][type]<br>
其中%用于标识格式控制字符<br>

flag的取值有：<br>
-:输出结果左对齐<br>
+:为整数添加符号<br>
0:将填充字符设为0（默认为空格）<br>
*#:为二进制、八进制、十六进制序列添加前缀<br>
以上所有取值可以同时存在<br>
flag区段可以不存在<br>

digit用于指定输出长度以及精度，格式为：len.digit<br>
len表示输出的最小长度，digit则表示保留的小数点位数<br>
digit区段可以不存在<br>

prec的取值为：<br>
l:将输出处理为long型<br>
u:将输出处理为无符号型，若指定了u，则可以省略type（默认type为d）<br>
prec可以不存在<br>

type的取值即为支持的格式控制字符，除非prec被指定为u，否则不可以省略<br>
